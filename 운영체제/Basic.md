# 운영체제

: 실행할 프로그램에 필요한 자원을 할당하고 프로그램이 올바르게 실행되도록 돕는 특별한 프로그램

- 운영체제는 현존하는 프로그램 중 규모가 가장 큰 프로그램 중 하나

- 자원 / 시스템 자원
  
  : 프로그램 실행에 있어 마땅히 필요한 요소. 컴퓨터의 4가지 핵심 부품 포함
  
  - 모든 프로그램은 실행을 위해 자원을 **필요**로 함
  
  - 사용자가 직접 자원에 접근하는 것은 위험!
  
  - 운영체제는 응용 프로그램들이 자원에 접근하려할 때 오직 자신을 통해서만(=코드 실행) 접근하도록 하여 자원 보호

- 운영체제 역할
  
  - 메모리 관리 : 응용 프로그램이 실행될 때 메모리를 할당하거나 삭제하는 등 관리
  
  - CPU 관리 : 여러가지 프로그램을 한 번에 사용한다는 것은 하나의 CPU가 아주 빠르게 여러가지 프로그램을 번갈아가며 실행함. 이 속도와 순서를 운영체제가 결정
  
  - 입출력 장치 관리
  
  - 파일, 폴더 관리 등
    
    => 응용 프로그램과 하드웨어 사이의 연결다리

- **커널 영역** : 운영체제가 적재된 메모리
  
  - 사용자 영역 : 응용 프로그램이 적재된 메모리
    
    - 응용 프로그램 : 사용자가 특정 목적을 위해 사용하는 일반적인 프로그램

---

## 커널 Kernel

: 운영체제의 심장. 운영체제의 핵심 서비스를 담당하는 부분

- 대부분의 전공서는 운영체제를 설명할 때 커널을 설명

- 유저 인터페이스(UI) : 운영체제에는 속하지만, 커널에는 속하지 않는 기능. 사용자와 컴퓨터 간의 통로일 뿐

## 이중 모드

: CPU가 명령어를 실행하는 모드를 크게 사용자 모드와 커널 모드로 구분하는 방식

- 플래그 레지스터의 슈퍼바이저 플래그
  
  - 어떤 모드로 사용중인지 확인 가능
  
  - 1 : 커널 모드. 0 : 사용자 모드

- #### 사용자 모드
  
  - 운영체제 서비스를 제공받을 수 없는 실행 모드
  
  - 커널 영역의 코드를 실행할 수 없는 실행 모드
  
  - 자원 접근 불가

- #### 커널 모드
  
  - 운영체제의 서비스를 제공받을 수 있는 실행 모드
  
  - 자원 접근을 비롯한 모든 명령어 실행 가능

## 시스템 호출

: 운영체제 서비스를 제공받기 위해 커널 모드로 전환하는 방법

- 일종의 소프트웨어 인터럽트 

- 시스템 호출이 처리되는 방식은 하드웨어 인터럽트 처리 방식과 유사
  
  1. 시스템 호출 : 응용 프로그램 -> 운영체제
  
  2. 운영체제 코드 실행
  
  3. 시스템 호출 복귀 : 운영체제 -> 응용 프로그램
  - 위 과정이 빈번하게 반복됨

![시스템 호출 명령어](https://github.com/user-attachments/assets/7f9eba08-c004-4902-8415-7cfca8698e58)



#### cf. 시스템 호출 관찰

- 리눅스 운영 체제
  
  - `strace` 명령어를 통해 관찰 가능
  
  - `ls` : 현재 디렉토리에 있는 파일 목록 관찰 가능
    
    - `strace (ls 명령어 경로)` : 시스템 콜들 확인 가능
      
      - ex. strace /bin/ls

- MAC OS 운영 체제
  
  - `sudo dtruss (ls 명령어 경로)`





---

## 운영체제의 핵심 서비스 (커널 기능)

- #### 프로세스 관리
  
  - 동시다발적으로 생성/실행/삭제되는 다양한 프로세스를 일목요연하게 관리
  
  - 프로세스 == 실행 중인 프로그램
  
  - 수많은 프로세스들이 동시에 실행 중임 -> 이 프로세스들을 관리해줌
  
  - 운영체제의 어떤 기법을 통해 실행 중인 모든 프로세스들이 메모리에 올라와 있지는 않을 수 있음 -> 페이징, 스와핑 기법
  
  -> 프로세스와 스레드, 프로세스 동기화, 교착 상태 해결 배율 예정

- #### 자원 접근 및 할당
  
  - CPU : CPU 스케줄링. 어떤 프로세스를 먼저, 얼마나 오래 실행할까?
  
  - 메모리 : 페이징, 스와핑, ...
  
  - 입출력장치 : 인터럽트 서비스 루틴

- #### 파일 시스템 관리
  
  - 관련된 정보를 파일이라는 단위로 저장 장치에 보관
  
  - 파일들을 묶어 폴더(디렉터리) 단위로 저장 장치에 보관
