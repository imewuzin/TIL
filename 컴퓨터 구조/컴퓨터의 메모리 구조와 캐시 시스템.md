# 컴퓨터의 메모리 구조와 캐시 시스템

## 컴퓨터의 핵심 구성요소

- **CPU (중앙처리장치)**: 연산과 제어를 담당하는 핵심 부품
- **메모리 (주기억장치)**: RAM과 ROM으로 구성된 임시 저장소
- **보조기억장치**: HDD, SSD 등 영구 저장소
- **입출력장치**: 키보드, 마우스, 모니터 등 외부와의 인터페이스 장치

---

## RAM의 특성과 종류

- RAM의 기본 특징
  
  - 휘발성 메모리: 전원이 꺼지면 모든 데이터가 소실되는 특성
  
  - CPU와의 직접 상호작용: CPU가 직접 데이터를 읽고 쓰는 작업 수행
  
  - 속도와 용량의 관계: 보조기억장치보다 빠르지만 용량은 작음
  
  - 실행 중인 프로그램 저장: 현재 실행되는 프로그램과 데이터 보관

- RAM의 세부 종류
  
  - **DRAM (Dynamic RAM)**
    
    - 주기적 재충전(리프레시) 필요
    
    - 저렴한 가격과 높은 집적도
    
    - 대용량 설계에 적합
    
    - 메인 메모리로 주로 사용
    
    - 상대적으로 낮은 소비전력
  
  - **SRAM (Static RAM)**
    
    - 재충전 불필요
    
    - 고속 동작 가능
    
    - 높은 가격과 낮은 집적도
    
    - 캐시 메모리로 주로 사용
    
    - 상대적으로 높은 소비전력
  
  - **SDRAM (Synchronous DRAM)**
    
    - 클록 신호와 동기화된 동작
    
    - 일정한 속도로 데이터 전송
    
    - 안정적인 데이터 처리
  
  - **DDR SDRAM (Double Data Rate SDRAM)**
    
    - 클록 신호당 2배의 데이터 전송
    
    - 세대별 발전 단계
      
      - DDR: 기본 대역폭
      
      - DDR2: DDR의 2배 대역폭
      
      - DDR3: DDR의 4배 대역폭
      
      - DDR4: DDR의 8배 대역폭
    
    - 현재 가장 대중적으로 사용
  
  |       | DRAM       | SRAM   |
  | ----- | ---------- | ------ |
  | 재충전   | 필요함        | 필요 없음  |
  | 속도    | 느림         | 빠름     |
  | 가격    | 저렴함        | 비쌈     |
  | 집적도   | 높음         | 낮음     |
  | 소비 전력 | 적음         | 높음     |
  | 사용 용도 | 주기억장치(RAM) | 캐시 메모리 |

---

## 메모리 주소 체계

- 기본 개념
  
  - **논리 주소**
    
    : CPU와 프로그램이 인식하는 주소
    
    - 각 프로그램마다 0번지부터 시작
    
    - 상대적인 주소 체계
  
  - **물리 주소**
    
    : 실제 하드웨어 메모리의 위치 (메모리 입장에서 바라본 주소)
    
    - 중복되지 않는 고유 주소
    
    - 절대적인 주소 체계

- **MMU (Memory Management Unit)**
  
  : 메모리 관리 장치 (하드웨어)
  
  - 논리 주소와 베이스 레지스터 값을 더해 논리 주소를 물리 주소로 변환
    
    - 베이스 레지스터 : 프로그램의 가장 작은 물리 주소(프로그램의 첫 물리 주소)를 저장하는 셈
    
    - 논리 주소 : 프로그램의 시작점으로부터 떨어진 거리인 셈
  
  - 프로그램의 실제 시작 주소 관리

## 메모리 보호 메커니즘

- **한계 레지스터**
  
  : 프로그램의 영역을 침범할 수 있는 명령어의 실행을 막음
  
  - 베이스 레지스터가 실행 중인 프로그램의 가장 작은 물리 주소를 저장한다면, 한계 레지스터는 논리 주소의 최대 크기를 저장
  
  - 베이스 레지스터 값 <= 프로그램의 물리 주소 범위 < 베이스 레지스터+한계 레이스터 값

- 메모리 보호 절차
  
  1. 논리 주소 확인
  
  2. 한계값 비교
  
  3. 범위 초과 시 중단
  
  4. 정상 범위 시 실행

---

## 캐시 메모리

- 저장 장치 계층 구조 (Memory hierarchy)
  
  - CPU와 가까운 저장 장치는 빠르고, 멀리 있는 저장 장치는 느림
  
  - 속도가 빠른 저장 장치는 저장 용량이 작고, 가격이 비싸다
  
  |     | 레지스터 | L! 캐시 | L2 캐시 | L3 캐시 | 메모리 | 보조기억장치 |
  | --- | ---- | ----- | ----- | ----- | --- | ------ |
  | 속도  | 빠름   | -     | -     | -     | -   | 느림     |
  | 용량  | 작음   | -     | -     | -     | -   | 큼      |
  | 가격  | 비쌈   | -     | -     | -     | -   | 저렴함    |

- 캐시 메모리
  
  : CPU와 메모리 사이에 위치한, 레지스터보다 용량이 크고 메모리보다 빠른 SRAM 기반의 저장 장치
  
  - CPU의 연산 속도와 메모리 접근 속도의 차이 완화

- 캐시 계층 구조
  
  - **L1 캐시**
    
    - CPU 내부에 위치
    
    - 가장 빠른 접근 속도
    
    - 명령어(L1-I)와 데이터(L1-D) 캐시로 분리하기도 함
    
    - 가장 작은 용량
  
  - **L2 캐시**
    
    - 코어 내부에 위치
    
    - L1보다 큰 용량
    
    - 중간 수준의 속도
    
    - 단일 코어 전용
  
  - **L3 캐시**
    
    - CPU 코어 외부에 위치
    
    - 가장 큰 용량
    
    - 여러 코어가 공유
    
    - 상대적으로 느린 속도

- **참조 지역성의 원리**
  
  : CPU가 메모리에 접근할 때의 주된 경향을 바탕으로 만들어진 원리
  
  - CPU는 접근한 메모리 공간 근처를 접근하려는 경향이 있음
  - CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있음
  
  - 캐시 적중률 = 캐시 히트 횟수 / (캐시 히드 횟수 + 캐시 미스 횟수)
    
    - 캐시 히트 : 예측이 들어맞을 경우 (CPU가 캐시 메모리에 저장된 값을 활용할 경우)
    
    - 캐시 미스 : 예측이 틀렸을 경우 (CPU가 메모리에 접근해야 하는 경우)
  
  - **시간적 지역성**
    
    - 최근 사용된 데이터의 재사용 가능성
    
    - 변수, 반복문 등에서 발생
    
    - 캐시 적중률 향상에 기여
  
  - **공간적 지역성**
    
    - 인접 메모리 영역의 사용 가능성
    
    - 순차적 코드 실행에서 발생
    
    - 데이터 prefetch에 활용
